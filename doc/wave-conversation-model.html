<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { // Input 0
var a=window;
// Input 1
var c="start";function d(e){this.t={};this.tick=function(f,g,b){b=b?b:(new Date).getTime();this.t[f]=[b,g]};this.tick(c,null,e)}var h=new d;a.jstiming={Timer:d,load:h};try{a.jstiming.pt=a.gtbExternal&&a.gtbExternal.pageT()||a.external&&a.external.pageT}catch(i){};
// Input 2
})()
</script>
<link rel="shortcut icon" href="http://www.gstatic.com/sites/p/b46d27/system/app/images/favicon.ico" type="image/x-icon" />
<link rel="apple-touch-icon" href="http://www.gstatic.com/sites/p/b46d27/system/app/images/apple-touch-icon.png" type="image/png" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var e=parseInt,h=window,i="length";function j(a){return document.getElementById(a)}h.byId=j;var k="";function l(a){return a.replace(/^\s+|\s+$/g,k)}h.trim=l;
var m="MSIE",n="6.0",o="string",p='id="',q='" ',r='class="',s='title="',t="display:inline-block;",u="left",v="float:left;",w="right",x="float:right;",y="cursor:hand;",z="<span ",A=' style="width:',B="px; height:",C="px;",D=";padding: 0;filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='",E="', sizingMethod='scale');\"></span><span style=\"padding: ",F=" ",G=";",H="float:",I='"></span>';
h.ie6ImgFix=function(a){var b=h.navigator?navigator.userAgent:k;if(b.indexOf(m)!=-1&&typeof opera=="undefined"){var d=/MSIE\s+([^\);]+)(\)|;)/;d.test(b);b=RegExp.$1;if(b==n){var c=typeof a==o?j(a):a;a=c.id?p+c.id+q:k;b=c.className?r+c.className+q:k;d=c.title?s+c.title+q:s+c.alt+q;var f=t+c.style.cssText;if(c.align==u)f=v+f;if(c.align==w)f=x+f;if(c.parentElement.href)f=y+f;var g=c.currentStyle,L=c.width-e(g.paddingLeft,10)-e(g.paddingRight,10),M=c.height-e(g.paddingTop,10)-e(g.paddingBottom,10),N=
z+a+b+d+A+L+B+M+C+f+D+c.src+E+g.paddingTop+F+g.paddingRight+F+g.paddingBottom+F+g.paddingLeft+G+(g.styleFloat?H+g.styleFloat+G:k)+I;h.setTimeout(function(){c.outerHTML=N},1)}}};var J=[],K=0;h.JOT_addListener=function(a,b,d){var c=new String(K++);a={eventName:a,handler:b,compId:d,key:c};J.push(a);return c};h.JOT_removeListenerByKey=function(a){for(var b=0;b<J[i];b++)if(J[b].key==a){J.splice(b,1);break}};
h.JOT_removeAllListenersForName=function(a){for(var b=0;b<J[i];b++)J[b].eventName==a&&J.splice(b,1)};var O="function";h.JOT_postEvent=function(a,b,d){var c={eventName:a,eventSrc:b||{},payload:d||{}};if(h.JOT_fullyLoaded){b=J[i];for(d=0;d<b&&d<J[i];d++){var f=J[d];if(f&&f.eventName==a){c.listenerCompId=f.compId||k;(f=typeof f.handler==O?f.handler:h[f.handler])&&f(c)}}}else h.JOT_delayedEvents.push({eventName:a,eventSrc:b,payload:d})};h.JOT_delayedEvents=[];h.JOT_fullyLoaded=false;var P="{0}";
h.JOT_formatRelativeToNow=function(a,b){a=((new Date).getTime()-a)/6E4;if(a>=1440)return null;var d=0;if(a>=60){a/=60;d=2}a>=2&&d++;return b?h.JOT_siteRelTimeStrs[d].replace(P,Math.floor(a)):h.JOT_userRelTimeStrs[d].replace(P,Math.floor(a))}; })()
</script>
<script>


var webspace = {"signInUrl":"https://www.google.com/a/UniversalLogin?md=waveprotocol.org&continue=http%3A%2F%2Fsites.google.com%2Fa%2Fwaveprotocol.org%2Fwave-protocol%2Fdraft-protocol-specs%2Fwave-conversation-model&service=jotspot","isGaiaBarRendered":false,"isConsumer":false,"termsUrl":"http://www.google.com/sites/help/intl/en/terms_apps.html","enableAnalytics":true,"homePath":"/","sharingPolicy":"OPENED_WITH_INDICATOR","isAdsenseEnabled":true,"analyticsAccountId":"UA-8930018-1","baseUri":"","name":"wave-protocol","features":{"subpageNav":false,"useNewCountdownEmbed":false,"useStandardEmbedsInSidebar":false,"experimental":{"displayEditorLockExceptions":false},"structuredDataSchemas":false,"editorSaveEndpointMigrations":true},"domain":"waveprotocol.org","adsensePublisherId":null,"isStartPageEnabled":true,"domainAnalyticsAccountId":"","siteTitle":"Google Wave Federation Protocol"};


webspace.isInsertPicasaPhotosEnabled = true;
  

webspace.isMyMapsEmbedEnabled = true;
  

webspace.gadgets = {"isGadgetDirectoryEnabled":true,"baseUri":"/system/app/pages/gadgets","isGgsRenderingEnabled":true};


webspace.user = {"uid":"","hasAdminAccess":false,"guest_":true,"domain":"","hasWriteAccess":false,"userName":"guest","dasherUser":false,"primaryEmail":"guest","displayNameOrEmail":"guest"};

webspace.page = {"locale":"en","state":"","wuid":"wuid:gx:3bc1760ecefe8590","timeZone":"America/Los_Angeles","properties":{},"type":"text","canChangePath":true,"parentWuid":"wuid:gx:61fafba4a1b57bc3","revision":10,"title":"Google Wave Conversation Model","isRtlLocale":false,"bidiEnabled":false,"siteLocale":"en","name":"wave-conversation-model","path":"/draft-protocol-specs/wave-conversation-model","isSiteRtlLocale":false,"parentPath":"/draft-protocol-specs"};


var editorResources = [
  'http://www.gstatic.com/sites/p/b46d27/system/js/trog_edit__en.js',
  'http://www.gstatic.com/sites/p/b46d27/system/app/css/trogedit.css',
  '/_/rsrc/1263422820329/system/app/css/editor.css'
];

var JOT_clearDotPath = 'http://www.gstatic.com/sites/p/b46d27/system/app/images/cleardot.gif';


var JOT_userRelTimeStrs = ["a minute ago"," minutes ago","an hour ago"," hours ago"];


webspace.page.currentTemplate = {"title":"Web Page","path":"/system/app/pagetemplates/text"};





var JOT_siteRelTimeStrs = ["a minute ago", "{0} minutes ago", "an hour ago", "{0} hours ago"];


</script>
<script type="text/javascript">
                window.jstiming.load.tick('scl');
              </script>
<link rel="stylesheet" type="text/css" href="http://www.gstatic.com/sites/p/b46d27/system/app/themes/default/standard-css-default-ltr-ltr.css" />
<link rel="stylesheet" type="text/css" href="/_/rsrc/1263422820408/system/app/css/overlay.css?cb=defaultundefineda100%25%25%25150goog-ws-left" />
<title>Google Wave Conversation Model (Google Wave Federation Protocol)</title>
<script type="text/javascript">
                window.jstiming.load.tick('cl');
              </script>
</head>

<body xmlns="http://www.google.com/ns/jotspot" id="body" class=" en">
<div id="sites-page-toolbar">
<div id="sites-status" class="sites-status" style="display:none;">
<div id="sites-notice" class="sites-notice"> </div>
</div>
</div>
<div id="sites-chrome-everything" style="direction: ltr">
<div id="sites-chrome-page-wrapper">
<div id="sites-chrome-page-wrapper-inside">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-chrome-header-wrapper">
<table id="sites-chrome-header" class="sites-layout-hbox" cellspacing="0">
<tr class="sites-header-primary-row">
<td id="sites-header-title">
<a href="http://www.waveprotocol.org/">
<img src="/_/rsrc/1243386131339/config/app/images/customLogo/customLogo.gif?revision=6" id="logo-img-id" onload="ie6ImgFix('logo-img-id');" alt="Logo" class="sites-logo" />
</a>
</td>
<td class="sites-layout-searchbox">
<div>
<form id="sites-searchbox-form" action="/system/app/pages/search">
<input type="text" onpropertychange="JOT_setTextDir(this)" oninput="JOT_setTextDir(this)" dir="" id="jot-ui-searchInput" name="q" size="20" />
<input type="hidden" id="sites-searchbox-scope" name="scope" value="search-site" />
<div class="goog-inline-block goog-button goog-button-base   "><div class="goog-inline-block goog-button-base-outer-box"><div class="goog-inline-block goog-button-base-inner-box"><div class="goog-button-base-pos"><div class="goog-button-base-top-shadow"> </div><div id="sites-searchbox-search-button" class="goog-button-base-content " style="" onclick=""><span id="sites-searchbox-search-button-label">Search this site</span></div></div></div></div></div>
</form>
</div>
</td>
</tr>
</table> 
</div> 
<div id="sites-chrome-main-wrapper">
<div id="sites-chrome-main-wrapper-inside">
<table id="sites-chrome-main" class="sites-layout-hbox" cellspacing="0">
<tr>
<td id="sites-chrome-sidebar-left" class="sites-layout-sidebar-left">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_2bd" class="sites-embed">
<div class="sites-embed-content sites-sidebar-nav ">
<ul jotId="navList">
<li class="nav-first"><div dir="ltr" style="padding-left: 5px;"><a href="http://www.waveprotocol.org/Home" jotId="wuid:gx:415eb3f2a1d4510a">Introduction</a>
</div></li>
<li class=""><div dir="ltr" style="padding-left: 5px;"><a href="http://www.waveprotocol.org/wave-community-principles" jotId="wuid:gx:399303fb051a4417">Community Principles</a>
</div></li>
<li class=""><div dir="ltr" style="padding-left: 5px;"><a href="http://www.waveprotocol.org/draft-protocol-specs" jotId="wuid:gx:61fafba4a1b57bc3">Draft Protocol Specs</a>
</div></li>
<li class=""><div dir="ltr" style="padding-left: 5px;"><a href="http://www.waveprotocol.org/whitepapers" jotId="wuid:gx:7a4e56272aeda2cf">White Papers</a>
</div></li>
<li class=""><div dir="ltr" style="padding-left: 5px;"><a href="http://www.waveprotocol.org/presentations" jotId="wuid:gx:3747faf193508332">Presentations</a>
</div></li>
<li class=""><div dir="ltr" style="padding-left: 5px;"><a href="http://www.waveprotocol.org/get-involved" jotId="wuid:gx:20213ae6d0fcfd0e">Get Involved</a>
</div></li>
<li class=""><div dir="ltr" style="padding-left: 5px;"><a href="http://www.waveprotocol.org/patent-license" jotId="wuid:gx:35022972e8c10a2b">Patent License</a>
</div></li>
<li class=""><div dir="ltr" style="padding-left: 5px;"><a href="http://www.waveprotocol.org/system/app/pages/sitemap/hierarchy" jotId="wuid:gx:71147cee67d9a9f8">Sitemap</a>
</div></li>
</ul>

</div>
</div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_6955448007211089" class="sites-embed" style="width:">
<h4 class="sites-embed-title">Google Wave APIs</h4>
<div class="sites-embed-content" style="padding:5px;">
<div dir="ltr">For information about how to extend Google Wave's client, or simply embed waves in your own site, check out the <a href="http://code.google.com/apis/wave/">Google Wave APIs</a>.</div>
</div>
</div>
</td>
<td id="sites-canvas-wrapper">
<div id="sites-canvas">
<div id="goog-ws-editor-toolbar-container"> </div>
<div xmlns="http://www.w3.org/1999/xhtml" id="title-crumbs" style="">
<A dir="ltr" href="/draft-protocol-specs">Draft Protocol Specs</A>‎ &gt; ‎
  </div>
<h3 xmlns="http://www.w3.org/1999/xhtml" id="sites-page-title-header" style="" align="left">
<span id="sites-page-title" dir="ltr">Google Wave Conversation Model</span>
</h3>

<div id="sites-canvas-main" class="sites-canvas-main">
<div id="sites-canvas-main-content">
<table xmlns="http://www.w3.org/1999/xhtml" cellspacing="0" class="sites-layout-name-one-column sites-layout-hbox"><tbody><tr><td class="sites-layout-tile sites-tile-name-content-1"><div dir="ltr"><span style="background-color:rgb(255, 255, 255);font-family:Verdana">
<div style="margin-top:0px;margin-bottom:0px">
<span style="background-color:rgb(243, 243, 243)">
<div style="margin-top:0px;margin-bottom:0px;text-align:center"><i><span style="font-family:Times New Roman;font-size:medium;font-style:normal"><div style="font-family:verdana, charcoal, helvetica, arial, sans-serif;font-size:small;color:rgb(0, 0, 0);background-color:rgb(255, 255, 255);margin-top:2em;margin-right:2em;margin-bottom:2em;margin-left:2em"><table cellpadding="0" cellspacing="2" style="width:30px;height:15px;text-align:right"><tbody><tr><td style="text-align:center;width:30px;height:15px;color:rgb(255, 255, 255);background-color:rgb(153, 0, 0)"> TOC </td></tr></tbody></table><table border="0" cellpadding="0" cellspacing="0" style="text-align:left" width="66%"><tbody><tr><td><table border="0" cellpadding="2" cellspacing="1" width="100%"><tbody><tr><td style="font-family:arial, helvetica, sans-serif;font-size:x-small;vertical-align:top;width:433px;color:rgb(255, 255, 255);background-color:rgb(102, 102, 102)"></td><td style="font-family:arial, helvetica, sans-serif;font-size:x-small;vertical-align:top;width:434px;color:rgb(255, 255, 255);background-color:rgb(102, 102, 102)">A. North</td></tr><tr><td style="font-family:arial, helvetica, sans-serif;font-size:x-small;vertical-align:top;width:433px;color:rgb(255, 255, 255);background-color:rgb(102, 102, 102)"> </td><td style="font-family:arial, helvetica, sans-serif;font-size:x-small;vertical-align:top;width:434px;color:rgb(255, 255, 255);background-color:rgb(102, 102, 102)">J. Gregorio</td></tr><tr><td style="font-family:arial, helvetica, sans-serif;font-size:x-small;vertical-align:top;width:433px;color:rgb(255, 255, 255);background-color:rgb(102, 102, 102)"> </td><td style="font-family:arial, helvetica, sans-serif;font-size:x-small;vertical-align:top;width:434px;color:rgb(255, 255, 255);background-color:rgb(102, 102, 102)">Google, Inc.</td></tr><tr><td style="font-family:arial, helvetica, sans-serif;font-size:x-small;vertical-align:top;width:433px;color:rgb(255, 255, 255);background-color:rgb(102, 102, 102)"> </td><td style="font-family:arial, helvetica, sans-serif;font-size:x-small;vertical-align:top;width:434px;color:rgb(255, 255, 255);background-color:rgb(102, 102, 102)">Oct 2009</td></tr></tbody></table></td></tr></tbody></table><h1 style="font-family:helvetica, monaco, MS Sans Serif, arial, sans-serif;font-weight:bold;font-style:normal;color:rgb(153, 0, 0);background-color:transparent;text-align:right"><a name="TOC-Google-Wave-Conversation-Model"></a><div style="text-align:left"><br /></div><div style="text-align:left">Google Wave Conversation Model</div></h1><h3 style="text-align:left;font-family:helvetica, monaco, MS Sans Serif, arial, sans-serif;font-weight:bold;font-style:normal;color:rgb(51, 51, 51);background-color:transparent"><a name="TOC-Abstract"></a>Abstract</h3><p style="text-align:left;margin-left:2em;margin-right:2em">Google Wave is a communication and collaboration platform based on hosted conversations, called waves. A wave comprises a set of concurrently editable structured documents and supports real-time sharing between multiple participants. This document is one in a larger set of specifications for Google Wave. This specification describes Google Wave conversation manifest document schema and blip document schema, which together define the Google Wave conversation model. This application model is layered upon the documents, operations and operational transformation defined in the Wave Federation Protocol; see <a href="http://waveprotocol.org/" style="font-weight:bold;color:rgb(102, 51, 51);background-color:transparent">http://waveprotocol.org</a>.</p><h3 style="text-align:left;font-family:helvetica, monaco, MS Sans Serif, arial, sans-serif;font-weight:bold;font-style:normal;color:rgb(51, 51, 51);background-color:transparent"><a name="TOC-Document-Status"></a>Document Status</h3><p style="text-align:left;margin-left:2em;margin-right:2em">Version 0.2</p><p style="text-align:left;margin-left:2em;margin-right:2em">This document is a draft and subject to change, possibly rapid and non-backwards compatible, based on implementation experience.</p><a name="toc" style="font-weight:bold"><div style="text-align:left"><span style="color:rgb(0, 0, 0);font-weight:normal"><br /></span></div></a><hr style="text-align:left;height:1px" /><h3 style="text-align:left;font-family:helvetica, monaco, MS Sans Serif, arial, sans-serif;font-weight:bold;font-style:normal;color:rgb(51, 51, 51);background-color:transparent"><a name="TOC-Table-of-Contents"></a>Table of Contents</h3><div style="text-align:left">1.  Introduction</div><div style="text-align:left">2.  Applicability</div><div style="text-align:left">3.  Terminology</div><div style="text-align:left">4.  Editorial Notes</div><div style="text-align:left">5.  Roadmap</div><div style="text-align:left">6.  Relationship between specifications</div><div style="text-align:left">7.  Terminology</div><div style="text-align:left">8.  Model</div><div style="text-align:left">    8.1.  Document namespace and validation</div><div style="text-align:left">    8.2.  Documents</div><div style="text-align:left">    8.3.  Conversation Manifest Document</div><div style="text-align:left">        8.3.1.  Elements</div><div style="text-align:left">        8.3.2.  Private Replies</div><div style="text-align:left">        8.3.3.  Examples</div><div style="text-align:left">    8.4.  Blip Document</div><div style="text-align:left">        8.4.1.  Schema Design</div><div style="text-align:left">        8.4.2.  Elements</div><div style="text-align:left">        8.4.3.  Annotations</div><div style="text-align:left">9.  Example Conversations</div><div style="text-align:left">    9.1.  Simple Replies</div><div style="text-align:left">    9.2.  In-line Replies</div><div style="text-align:left">    9.3.  Private In-line Replies</div><div style="text-align:left">10.  Display</div><div style="text-align:left">11.  Mechanisms</div><div style="text-align:left">    11.1.  Creating a new blip</div><div style="text-align:left">    11.2.  Creating a reply thread</div><div style="text-align:left">    11.3.  Deleting a blip</div><div style="text-align:left">12.  References</div><div style="text-align:left"><a href="http://www.corp.google.com/~jcgregorio/wave-protocol/convspec.html#rfc.authors" style="font-weight:bold;color:rgb(153, 0, 0);background-color:transparent"></a>§  Authors' Addresses</div><div style="text-align:left"><br /></div><a name="intro" style="font-weight:bold"><div style="text-align:left"><span style="color:rgb(0, 0, 0);font-weight:normal"><br /></span></div></a><hr style="text-align:left;height:1px" /><font color="#FFFFFF"><span style="font-weight:normal"><br /></span></font><h3 style="text-align:left;font-family:helvetica, monaco, MS Sans Serif, arial, sans-serif;font-weight:bold;font-style:normal;color:rgb(51, 51, 51);background-color:transparent"><a name="TOC-1.-Introduction"></a>1.  Introduction</h3><p style="text-align:left;margin-left:2em;margin-right:2em">A wave can be used to represent a conversation. This specification describes the Google Wave conversation model, which implements the conversation structure within structured documents in a wave.</p><a name="applicability" style="font-weight:bold"><div style="text-align:left"><span style="color:rgb(0, 0, 0);font-weight:normal"><br /></span></div></a><hr style="text-align:left;height:1px" /><table cellpadding="0" cellspacing="2" style="width:30px;height:15px;text-align:right"><tbody><tr><td style="text-align:center;width:30px;height:15px;color:rgb(255, 255, 255);background-color:rgb(153, 0, 0)"> TOC </td></tr></tbody></table><a name="rfc.section.2" style="font-weight:bold"></a><h3 style="text-align:left;font-family:helvetica, monaco, MS Sans Serif, arial, sans-serif;font-weight:bold;font-style:normal;color:rgb(51, 51, 51);background-color:transparent"><a name="TOC-2.-Applicability"></a>2.  Applicability</h3><p style="text-align:left;margin-left:2em;margin-right:2em">The wave documents described in this specification may, in whole or in part, be interchanged between servers via the Google Wave Federation Protocol. The structure within a wave document is reminiscent of XML. A document contains an XML-like tree structure of elements, with attributes, and text. In addition, a document includes stand-off key/value annotations over arbitrary ranges. Documents are subject to constraints expressed in schemas similar to XML schemas.</p><p style="text-align:left;margin-left:2em;margin-right:2em">The use of XML in this specification in no way forces the server implementation to be XML-based. That is, XML is used as a convenient model and implementations are free to implement that model in the manner that is most convenient and performant.</p><a name="intro-terms" style="font-weight:bold"><div style="text-align:left"><span style="color:rgb(0, 0, 0);font-weight:normal"><br /></span></div></a><hr style="text-align:left;height:1px" /><table cellpadding="0" cellspacing="2" style="width:30px;height:15px;text-align:right"><tbody><tr><td style="text-align:center;width:30px;height:15px;color:rgb(255, 255, 255);background-color:rgb(153, 0, 0)"> TOC </td></tr></tbody></table><a name="rfc.section.3" style="font-weight:bold"></a><h3 style="text-align:left;font-family:helvetica, monaco, MS Sans Serif, arial, sans-serif;font-weight:bold;font-style:normal;color:rgb(51, 51, 51);background-color:transparent"><a name="TOC-3.-Terminology"></a>3.  Terminology</h3><p style="text-align:left;margin-left:2em;margin-right:2em">The capitalized key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in BCP 14, RFC 2119 [TERMS].</p><a name="editorial-notes" style="font-weight:bold"><div style="text-align:left"><span style="color:rgb(0, 0, 0);font-weight:normal"><br /></span></div></a><hr style="text-align:left;height:1px" /><table cellpadding="0" cellspacing="2" style="width:30px;height:15px;text-align:right"><tbody><tr><td style="text-align:center;width:30px;height:15px;color:rgb(255, 255, 255);background-color:rgb(153, 0, 0)"> TOC </td></tr></tbody></table><a name="rfc.section.4" style="font-weight:bold"></a><h3 style="text-align:left;font-family:helvetica, monaco, MS Sans Serif, arial, sans-serif;font-weight:bold;font-style:normal;color:rgb(51, 51, 51);background-color:transparent"><a name="TOC-4.-Editorial-Notes"></a>4.  Editorial Notes</h3><p style="text-align:left;margin-left:2em;margin-right:2em">To provide feedback on this draft join the wave-protocol mailing list at <a href="http://groups.google.com/group/wave-protocol" style="font-weight:bold;color:rgb(102, 51, 51);background-color:transparent">http://groups.google.com/group/wave-protocol</a>.</p><a name="roadmap" style="font-weight:bold"><div style="text-align:left"><span style="color:rgb(0, 0, 0);font-weight:normal"><br /></span></div></a><hr style="text-align:left;height:1px" /><table cellpadding="0" cellspacing="2" style="width:30px;height:15px;text-align:right"><tbody><tr><td style="text-align:center;width:30px;height:15px;color:rgb(255, 255, 255);background-color:rgb(153, 0, 0)"> TOC </td></tr></tbody></table><a name="rfc.section.5" style="font-weight:bold"></a><h3 style="text-align:left;font-family:helvetica, monaco, MS Sans Serif, arial, sans-serif;font-weight:bold;font-style:normal;color:rgb(51, 51, 51);background-color:transparent"><a name="TOC-5.-Roadmap"></a>5.  Roadmap</h3><p style="text-align:left;margin-left:2em;margin-right:2em">Wave is being actively developed and some features of the conversation model have not been documented, or may change in the short term. Currently undocumented are annotations, RTL text, images, and form elements.</p><p style="text-align:left;margin-left:2em;margin-right:2em">Here is a short roadmap of upcoming changes:</p><ul style="margin-left:2em;margin-right:2em"><li style="text-align:left;margin-left:3em">A mechanism for signalling blip submission</li><li style="text-align:left;margin-left:3em">A mechanism for signalling relevance of changes</li><li style="text-align:left;margin-left:3em">Modification timestamps</li><li style="text-align:left;margin-left:3em">Cursors and selections</li><li style="text-align:left;margin-left:3em">Attachments</li><li style="text-align:left;margin-left:3em">Rich text</li></ul><a name="spec-relationships" style="font-weight:bold"><div style="text-align:left"><span style="color:rgb(0, 0, 0);font-weight:normal"><br /></span></div></a><hr style="text-align:left;height:1px" /><table cellpadding="0" cellspacing="2" style="width:30px;height:15px;text-align:right"><tbody><tr><td style="text-align:center;width:30px;height:15px;color:rgb(255, 255, 255);background-color:rgb(153, 0, 0)"> TOC </td></tr></tbody></table><a name="rfc.section.6" style="font-weight:bold"></a><h3 style="text-align:left;font-family:helvetica, monaco, MS Sans Serif, arial, sans-serif;font-weight:bold;font-style:normal;color:rgb(51, 51, 51);background-color:transparent"><a name="TOC-6.-Relationship-between-specificati"></a>6.  Relationship between specifications</h3><p style="text-align:left;margin-left:2em;margin-right:2em">The Federation Protocol specifies the form and function of operations that mutate wave documents. While this specification deals only with conversation manifest documents and blip documents, a wavelet may contain documents of other types. Wavelets have metadata that is not stored in document form, including the wave id, wavelet id, and list of named participants for the wavelet. See the Federation Protocol for more details on wavelets and participants.</p><a name="terminology" style="font-weight:bold"><div style="text-align:left"><span style="color:rgb(0, 0, 0);font-weight:normal"><br /></span></div></a><hr style="text-align:left;height:1px" /><table cellpadding="0" cellspacing="2" style="width:30px;height:15px;text-align:right"><tbody><tr><td style="text-align:center;width:30px;height:15px;color:rgb(255, 255, 255);background-color:rgb(153, 0, 0)"> TOC </td></tr></tbody></table><a name="rfc.section.7" style="font-weight:bold"></a><h3 style="text-align:left;font-family:helvetica, monaco, MS Sans Serif, arial, sans-serif;font-weight:bold;font-style:normal;color:rgb(51, 51, 51);background-color:transparent"><a name="TOC-7.-Terminology"></a>7.  Terminology</h3><p style="text-align:left;margin-left:2em;margin-right:2em">The following terminology is used by this specification:</p><ul style="margin-left:2em;margin-right:2em"><li style="text-align:left;margin-left:3em">wave - a collection of wavelets</li><li style="text-align:left;margin-left:3em">wavelet - a collection of named documents and participants, and the domain of operational transformation</li><li style="text-align:left;margin-left:3em">conversation - an interpretation of a wavelet as a structured collection of messages</li><li style="text-align:left;margin-left:3em">document - a structured wave document</li><li style="text-align:left;margin-left:3em">blip - a document containing a conversational message</li><li style="text-align:left;margin-left:3em">thread - a sequence of blips, each a "continuation" to that before it</li><li style="text-align:left;margin-left:3em">conversation manifest - a document that defines the structure of a conversation</li><li style="text-align:left;margin-left:3em">reply - a thread that represents a reply to conversation material appearing above it</li><li style="text-align:left;margin-left:3em">inline reply - a reply anchored to a particular point in the replied-to blip</li><li style="text-align:left;margin-left:3em">private reply - a conversation wavelet with a restricted set of participants</li></ul><a name="model" style="font-weight:bold"><div style="text-align:left"><span style="color:rgb(0, 0, 0);font-weight:normal"><br /></span></div></a><hr style="text-align:left;height:1px" /><table cellpadding="0" cellspacing="2" style="width:30px;height:15px;text-align:right"><tbody><tr><td style="text-align:center;width:30px;height:15px;color:rgb(255, 255, 255);background-color:rgb(153, 0, 0)"> TOC </td></tr></tbody></table><a name="rfc.section.8" style="font-weight:bold"></a><h3 style="text-align:left;font-family:helvetica, monaco, MS Sans Serif, arial, sans-serif;font-weight:bold;font-style:normal;color:rgb(51, 51, 51);background-color:transparent"><a name="TOC-8.-Model"></a>8.  Model</h3><p style="text-align:left;margin-left:2em;margin-right:2em">A conversation wave is a forest of conversations. Each conversation has a set of participants collaborating on a structured collection of blips. The structure of the conversation is maintained in the conversation manifest document, while the content of the conversational messages is stored in blip documents. Clients participate in the conversation by sending operations which mutate the conversation manifest and blips.</p><p style="text-align:left;margin-left:2em;margin-right:2em">The following assumptions about the wave model and operational transforms should be kept in mind when reading this specification.</p><ul style="margin-left:2em;margin-right:2em"><li style="text-align:left;margin-left:3em">A wavelet may contain many documents which may or may not be part of the conversation. This specification addresses only the two document types needed for the conversation model: blip documents and conversation manifest documents.</li><li style="text-align:left;margin-left:3em">Documents not referenced by the conversation manifest are data documents and are not part of the conversation content.</li></ul><a name="namespaces" style="font-weight:bold"><div style="text-align:left"><span style="color:rgb(0, 0, 0);font-weight:normal"><br /></span></div></a><hr style="text-align:left;height:1px" /><table cellpadding="0" cellspacing="2" style="width:30px;height:15px;text-align:right"><tbody><tr><td style="text-align:center;width:30px;height:15px;color:rgb(255, 255, 255);background-color:rgb(153, 0, 0)"> TOC </td></tr></tbody></table><a name="rfc.section.8.1" style="font-weight:bold"></a><h3 style="text-align:left;font-family:helvetica, monaco, MS Sans Serif, arial, sans-serif;font-weight:bold;font-style:normal;color:rgb(51, 51, 51);background-color:transparent"><a name="TOC-8.1.-Document-namespace-and-validat"></a>8.1.  Document namespace and validation</h3><p style="text-align:left;margin-left:2em;margin-right:2em">Every document in a wavelet has an identifier unique within the wavelet. Ids of documents are structured as a sequence of '+'-separated tokens. The first token of the id is conventionally the document namespace. That wavelet and document namespace determine the type of document (its schema). Different types of documents may have different validity constraints. Operations which violate the schema for a document must be rejected by the server.</p><p style="text-align:left;margin-left:2em;margin-right:2em">The namespaces for the documents described in this specification are:</p><blockquote><dl><dt style="text-align:left">b</dt><dd style="text-align:left">Blip document</dd><dt style="text-align:left">conversation</dt><dd style="text-align:left">Conversation Manifest document</dd></dl></blockquote><p style="text-align:left;margin-left:2em;margin-right:2em">An example blip document id:</p><div style="text-align:left;display:table;width:0px;margin-left:3em;margin-right:auto"><pre style="font-family:Courier New, Courier, monospace;font-size:small;text-align:left;padding-top:4px;padding-right:4px;padding-bottom:4px;padding-left:4px;color:rgb(0, 0, 0);background-color:rgb(204, 204, 204)">b+a8w3SD_k</pre></div><a name="documents" style="font-weight:bold"><div style="text-align:left"><span style="color:rgb(0, 0, 0);font-weight:normal"><br /></span></div></a><hr style="text-align:left;height:1px" /><table cellpadding="0" cellspacing="2" style="width:30px;height:15px;text-align:right"><tbody><tr><td style="text-align:center;width:30px;height:15px;color:rgb(255, 255, 255);background-color:rgb(153, 0, 0)"> TOC </td></tr></tbody></table><a name="rfc.section.8.2" style="font-weight:bold"></a><h3 style="text-align:left;font-family:helvetica, monaco, MS Sans Serif, arial, sans-serif;font-weight:bold;font-style:normal;color:rgb(51, 51, 51);background-color:transparent"><a name="TOC-8.2.-Documents"></a>8.2.  Documents</h3><p style="text-align:left;margin-left:2em;margin-right:2em">This section describes the two document types that make up the conversation model.As a general principle of data modeling in waves, metadata is embedded in documents where it can be manipulated by operations. The conversation metadata includes the message structure and contributors. Below are examples of a blip document and a conversation manifest document.</p><p style="text-align:left;margin-left:2em;margin-right:2em">Blip document example</p><div style="text-align:left;display:table;width:0px;margin-left:3em;margin-right:auto"><pre style="font-family:Courier New, Courier, monospace;font-size:small;text-align:left;padding-top:4px;padding-right:4px;padding-bottom:4px;padding-left:4px;color:rgb(0, 0, 0);background-color:rgb(204, 204, 204)">&lt;contributor name="dadams@acmewave.com"&gt;
&lt;body&gt;
	&lt;line&gt;&lt;/line&gt;There is a theory which states that if ever anybody
	&lt;line&gt;&lt;/line&gt;discovers exactly what the Universe is for and why it
	&lt;line&gt;&lt;/line&gt;is here, it will instantly disappear and be replaced by
	&lt;line&gt;&lt;/line&gt;something even more bizarre and inexplicable. There is another
	&lt;line&gt;&lt;/line&gt;theory which states that this has already happened.
&lt;/body&gt;</pre></div><p style="text-align:left;margin-left:2em;margin-right:2em">Conversation manifest document example</p><div style="text-align:left;display:table;width:0px;margin-left:3em;margin-right:auto"><pre style="font-family:Courier New, Courier, monospace;font-size:small;text-align:left;padding-top:4px;padding-right:4px;padding-bottom:4px;padding-left:4px;color:rgb(0, 0, 0);background-color:rgb(204, 204, 204)">&lt;conversation sort="m"&gt;
	&lt;blip id="b+a"&gt; &lt;!-- first message --&gt;
		&lt;thread id="3Fsd"&gt;
			&lt;blip id="b+aaa"&gt;&lt;/blip&gt; &lt;!-- indented reply to "b+a" --&gt;
			&lt;blip id="b+aab"&gt;&lt;/blip&gt; &lt;!-- continuation to "b+aaa" --&gt;
		&lt;/thread&gt;
		&lt;thread id="jjKs"&gt;
			&lt;blip id="b+aba"&gt;&lt;/blip&gt; &lt;!-- another reply to "b+a" --&gt;
		&lt;/thread&gt;
	&lt;/blip&gt;
	&lt;blip id="b+b"&gt; &lt;!-- continuation after "b+a" --&gt;
		&lt;peer id="chess+4342"&gt;&lt;/peer&gt; &lt;!-- consistency peer identifier --&gt;
		&lt;thread inline="true" id="J362"&gt;
			&lt;blip id="b+baa"&gt;&lt;/blip&gt; &lt;!-- inline reply to "b+b" --&gt;
			&lt;blip id="b+bab"&gt;&lt;/blip&gt; &lt;!-- continuation to "b+aaa" --&gt;
		&lt;/thread&gt;
		&lt;thread inline="true" ... &gt; &lt;!-- another inline reply group,
			possibly at the same location --&gt;
			...
		&lt;/thread&gt;
		&lt;thread id="9dKx"&gt; &lt;!-- non-inline reply to "b+b" --&gt;
			...
		&lt;/thread&gt;
	&lt;/blip&gt;
&lt;/conversation&gt;
</pre></div><a name="conversation-manifest" style="font-weight:bold"><div style="text-align:left"><span style="color:rgb(0, 0, 0);font-weight:normal"><br /></span></div></a><hr style="text-align:left;height:1px" /><table cellpadding="0" cellspacing="2" style="width:30px;height:15px;text-align:right"><tbody><tr><td style="text-align:center;width:30px;height:15px;color:rgb(255, 255, 255);background-color:rgb(153, 0, 0)"> TOC </td></tr></tbody></table><a name="rfc.section.8.3" style="font-weight:bold"></a><h3 style="text-align:left;font-family:helvetica, monaco, MS Sans Serif, arial, sans-serif;font-weight:bold;font-style:normal;color:rgb(51, 51, 51);background-color:transparent"><a name="TOC-8.3.-Conversation-Manifest-Document"></a>8.3.  Conversation Manifest Document</h3><p style="text-align:left;margin-left:2em;margin-right:2em">A conversation manifest document has the distinguished document id 'conversation', and is the only document in the 'conversation' namespace. There is one conversation manifest document per conversation.</p><p style="text-align:left;margin-left:2em;margin-right:2em">The conversation manifest defines the logical structure of the conversation by describing the relationships between the blips. See the Display section for how the logical structure of conversations is reflected in the user-interface of a wave client.</p><p style="text-align:left;margin-left:2em;margin-right:2em">Blip elements are wrapped in a grouping element 'thread', except for top-level blips which belong to an implicit root thread. A blip may have multiple child 'thread' elements representing replies. Each 'thread' element has an id, unique within the conversation. Thread ids have no semantic meaning.</p><p style="text-align:left;margin-left:2em;margin-right:2em">A manifest document containing duplicate blip or thread ids is currently undefined.</p><p style="text-align:left;margin-left:2em;margin-right:2em">Here is a very simple conversation manifest that references only a single blip.</p><div style="text-align:left;display:table;width:0px;margin-left:3em;margin-right:auto"><pre style="font-family:Courier New, Courier, monospace;font-size:small;text-align:left;padding-top:4px;padding-right:4px;padding-bottom:4px;padding-left:4px;color:rgb(0, 0, 0);background-color:rgb(204, 204, 204)"> &lt;conversation&gt;
     &lt;blip id="b+a"&gt; &lt;!-- first and only message --&gt;
     &lt;/blip&gt;
 &lt;/conversation&gt;
</pre></div><p style="text-align:left;margin-left:2em;margin-right:2em">Here is a more complex conversation manifest that references multiple blips.</p><div style="text-align:left;display:table;width:0px;margin-left:3em;margin-right:auto"><pre style="font-family:Courier New, Courier, monospace;font-size:small;text-align:left;padding-top:4px;padding-right:4px;padding-bottom:4px;padding-left:4px;color:rgb(0, 0, 0);background-color:rgb(204, 204, 204)"> &lt;conversation&gt;
     &lt;blip id="b+a"&gt; &lt;!-- first message --&gt;
         &lt;thread id="x123"&gt;
             &lt;blip id="b+aaa"&gt;&lt;/blip&gt; &lt;!-- indented reply to "b+a" --&gt;
         &lt;/thread&gt;
         &lt;thread inline="true" id="x983"&gt;
             &lt;blip id="b+aba"&gt;&lt;/blip&gt; &lt;!-- another reply to "b+a" --&gt;
             &lt;blip id="b+abb"&gt;&lt;/blip&gt; &lt;!-- another reply to "b+a" --&gt;
         &lt;/thread&gt;
     &lt;/blip&gt;
 &lt;/conversation&gt;
</pre></div><a name="conv-manifest-elements" style="font-weight:bold"><div style="text-align:left"><span style="color:rgb(0, 0, 0);font-weight:normal"><br /></span></div></a><hr style="text-align:left;height:1px" /><table cellpadding="0" cellspacing="2" style="width:30px;height:15px;text-align:right"><tbody><tr><td style="text-align:center;width:30px;height:15px;color:rgb(255, 255, 255);background-color:rgb(153, 0, 0)"> TOC </td></tr></tbody></table><a name="rfc.section.8.3.1" style="font-weight:bold"></a><h3 style="text-align:left;font-family:helvetica, monaco, MS Sans Serif, arial, sans-serif;font-weight:bold;font-style:normal;color:rgb(51, 51, 51);background-color:transparent"><a name="TOC-8.3.1.-Elements"></a>8.3.1.  Elements</h3><p style="text-align:left;margin-left:2em;margin-right:2em">These are the allowed elements in a conversation manifest.</p><blockquote><dl><dt style="text-align:left">conversation</dt><dd style="text-align:left">The top-level element in a conversation manifest document. It may have anchor attributes ("anchorWavelet", "anchorManifestOffset", "anchorVersion", "anchorBlip", "anchorOffset"), which determine where this conversation is displayed. See the section below on private replies. It also has a "sort" attribute. The value of the sort attribute is used to determine the order of peer conversation elements by sorting on sort values lexicographically. A conversation element has zero or more 'blip' elements as children.</dd><dt></dt><dd><blockquote><dl><dt style="text-align:left">anchorWavelet</dt><dd style="text-align:left">The id of the wavelet that this conversation is a reply to.</dd><dt style="text-align:left">anchorManifestOffset</dt><dd style="text-align:left">An integer offset into the document sequence for the parent's conversation manifest.</dd><dt style="text-align:left">anchorVersion</dt><dd style="text-align:left">The version of the parent wavelet when the private reply was created.</dd><dt style="text-align:left">anchorBlip</dt><dd style="text-align:left">The id of the blip document in the parent wavelet that anchors the reply.</dd><dt style="text-align:left">anchorOffset</dt><dd style="text-align:left">An integer offset into the replied-to blip document that anchors the private reply.</dd></dl></blockquote></dd><dt style="text-align:left">blip</dt><dd style="text-align:left">Represents a message. Every blip element has an 'id' attribute that references a blip document in the conversation. It may also have a 'deleted' attribute whose boolean value determines if that blip has been logically deleted. See the section below on deleting blips. A blip may have zero or more 'thread' and 'peer' elements as children.</dd><dt style="text-align:left">thread</dt><dd style="text-align:left">Represents a sequence of messages. All sibling blips in a thread element are considered a reply to the parent blip element. A thread element has an "id" and optional boolean "inline" attribute. The "inline" attribute determines whether the thread is anchored inline in the parent blip. The default value for "inline" if false, that is, the inline attribute not being present is the same thing as inline=false. A thread may have zero or more 'blip' elements as children.</dd><dt style="text-align:left">peer</dt><dd style="text-align:left">A peer element has an "id" attribute. The "id" attribute value is the id of a data document. The identified data document is not a blip or conversation manifest document.</dd></dl></blockquote><a name="private-replies" style="font-weight:bold"><div style="text-align:left"><span style="color:rgb(0, 0, 0);font-weight:normal"><br /></span></div></a><hr style="text-align:left;height:1px" /><table cellpadding="0" cellspacing="2" style="width:30px;height:15px;text-align:right"><tbody><tr><td style="text-align:center;width:30px;height:15px;color:rgb(255, 255, 255);background-color:rgb(153, 0, 0)"> TOC </td></tr></tbody></table><a name="rfc.section.8.3.2" style="font-weight:bold"></a><h3 style="text-align:left;font-family:helvetica, monaco, MS Sans Serif, arial, sans-serif;font-weight:bold;font-style:normal;color:rgb(51, 51, 51);background-color:transparent"><a name="TOC-8.3.2.-Private-Replies"></a>8.3.2.  Private Replies</h3><p style="text-align:left;margin-left:2em;margin-right:2em">Private replies are represented as distinct wavelets with their own conversation manifest containing a reference to the parent conversation wavelet. Sub-conversations reference the parent conversation's manifest document with a (wavelet-id, blip-id, location, version) tuple referred to as an anchor. This tuple refers to a parent blip by naming the replied-to wavelet and blip. The location and version attributes refer to the corresponding blip element in the replied-to conversation's manifest document at some previous version. This ensures the information is still present if the parent blip is deleted.</p><p style="text-align:left;margin-left:2em;margin-right:2em">An inline private reply also references an anchor point in the replied-to blip at a selected version. A forthcoming mechanism will allow clients to request a server to transform a location to the current version for rendering.</p><p style="text-align:left;margin-left:2em;margin-right:2em">This representation prevents leakage of the existence of the private reply to participants who cannot access it. Note that this structure still leaks the existence of the parent conversation to the private reply.</p><p style="text-align:left;margin-left:2em;margin-right:2em">The anchoring tuple is represented as a set of optional attributes on the conversation tag of the conversation manifest document.</p><a name="conversation-element-examples" style="font-weight:bold"><div style="text-align:left"><span style="color:rgb(0, 0, 0);font-weight:normal"><br /></span></div></a><hr style="text-align:left;height:1px" /><table cellpadding="0" cellspacing="2" style="width:30px;height:15px;text-align:right"><tbody><tr><td style="text-align:center;width:30px;height:15px;color:rgb(255, 255, 255);background-color:rgb(153, 0, 0)"> TOC </td></tr></tbody></table><a name="rfc.section.8.3.3" style="font-weight:bold"></a><h3 style="text-align:left;font-family:helvetica, monaco, MS Sans Serif, arial, sans-serif;font-weight:bold;font-style:normal;color:rgb(51, 51, 51);background-color:transparent"><a name="TOC-8.3.3.-Examples"></a>8.3.3.  Examples</h3><p style="text-align:left;margin-left:2em;margin-right:2em">A root wavelet has no anchoring information.</p><div style="text-align:left;display:table;width:0px;margin-left:3em;margin-right:auto"><pre style="font-family:Courier New, Courier, monospace;font-size:small;text-align:left;padding-top:4px;padding-right:4px;padding-bottom:4px;padding-left:4px;color:rgb(0, 0, 0);background-color:rgb(204, 204, 204)">&lt;conversation&gt;&lt;/conversation&gt;
</pre></div><p style="text-align:left;margin-left:2em;margin-right:2em">A non-inline private reply wavelet, referencing a blip in the conversation manifest document. The sort attribute determines sibling wavelet sort order by lexicographic value order.</p><div style="text-align:left;display:table;width:0px;margin-left:3em;margin-right:auto"><pre style="font-family:Courier New, Courier, monospace;font-size:small;text-align:left;padding-top:4px;padding-right:4px;padding-bottom:4px;padding-left:4px;color:rgb(0, 0, 0);background-color:rgb(204, 204, 204)">&lt;conversation
     sort="p"
     anchorWavelet="conv+root"
     anchorBlip="b+123"
     anchorManifestOffset="45"
     anchorVersion="7436" &gt;
&lt;/conversation&gt;
</pre></div><p style="text-align:left;margin-left:2em;margin-right:2em">An inline private reply, also has an anchor offset referring to the replied-to blip.</p><div style="text-align:left;display:table;width:0px;margin-left:3em;margin-right:auto"><pre style="font-family:Courier New, Courier, monospace;font-size:small;text-align:left;padding-top:4px;padding-right:4px;padding-bottom:4px;padding-left:4px;color:rgb(0, 0, 0);background-color:rgb(204, 204, 204)">&lt;conversation
     sort="p"
     anchorWavelet="conv+root"
     anchorBlip="b+123"
     anchorManifestOffset="45"
     anchorVersion="7436"
     anchorOffset="784"&gt;
&lt;/conversation&gt;
</pre></div><a name="blip-document" style="font-weight:bold"><div style="text-align:left"><span style="color:rgb(0, 0, 0);font-weight:normal"><br /></span></div></a><hr style="text-align:left;height:1px" /><table cellpadding="0" cellspacing="2" style="width:30px;height:15px;text-align:right"><tbody><tr><td style="text-align:center;width:30px;height:15px;color:rgb(255, 255, 255);background-color:rgb(153, 0, 0)"> TOC </td></tr></tbody></table><a name="rfc.section.8.4" style="font-weight:bold"></a><h3 style="text-align:left;font-family:helvetica, monaco, MS Sans Serif, arial, sans-serif;font-weight:bold;font-style:normal;color:rgb(51, 51, 51);background-color:transparent"><a name="TOC-8.4.-Blip-Document"></a>8.4.  Blip Document</h3><p style="text-align:left;margin-left:2em;margin-right:2em">A blip document is distinguished by having a document id that begins with the namespace 'b'.</p><p style="text-align:left;margin-left:2em;margin-right:2em">A simple blip document.</p><div style="text-align:left;display:table;width:0px;margin-left:3em;margin-right:auto"><pre style="font-family:Courier New, Courier, monospace;font-size:small;text-align:left;padding-top:4px;padding-right:4px;padding-bottom:4px;padding-left:4px;color:rgb(0, 0, 0);background-color:rgb(204, 204, 204)">&lt;contributor name="me@gwave.com"&gt;&lt;/contributor&gt;
&lt;contributor name="you@gwave.com"&gt;&lt;/contributor&gt;
&lt;body&gt;
    &lt;line&gt;&lt;/line&gt;The quick brown fox...
&lt;/body&gt;
</pre></div><p style="text-align:left;margin-left:2em;margin-right:2em">A more complex blip document.</p><div style="text-align:left;display:table;width:0px;margin-left:3em;margin-right:auto"><pre style="font-family:Courier New, Courier, monospace;font-size:small;text-align:left;padding-top:4px;padding-right:4px;padding-bottom:4px;padding-left:4px;color:rgb(0, 0, 0);background-color:rgb(204, 204, 204)">&lt;contributor name="me@gwave.com"&gt;&lt;/contributor&gt;
&lt;contributor name="you@gwave.com"&gt;&lt;/contributor&gt;
&lt;contributor name="fred@acmewave.com"&gt;&lt;/contributor&gt;
&lt;body&gt;
    &lt;line&gt;&lt;/line&gt;The quick brown fox
    &lt;line&gt;&lt;/line&gt;Jumped over
    &lt;line&gt;&lt;/line&gt;the lazy dog.
    &lt;image attachment="a+sadkfd"&gt;
        &lt;caption&gt;A lazy dog.&lt;/caption&gt;
    &lt;/image&gt;
&lt;/body&gt;
</pre></div><a name="schema-design" style="font-weight:bold"><div style="text-align:left"><span style="color:rgb(0, 0, 0);font-weight:normal"><br /></span></div></a><hr style="text-align:left;height:1px" /><table cellpadding="0" cellspacing="2" style="width:30px;height:15px;text-align:right"><tbody><tr><td style="text-align:center;width:30px;height:15px;color:rgb(255, 255, 255);background-color:rgb(153, 0, 0)"> TOC </td></tr></tbody></table><a name="rfc.section.8.4.1" style="font-weight:bold"></a><h3 style="text-align:left;font-family:helvetica, monaco, MS Sans Serif, arial, sans-serif;font-weight:bold;font-style:normal;color:rgb(51, 51, 51);background-color:transparent"><a name="TOC-8.4.1.-Schema-Design"></a>8.4.1.  Schema Design</h3><p style="text-align:left;margin-left:2em;margin-right:2em">The documents representing messages (blips) conform to a very simple schema.</p><p style="text-align:left;margin-left:2em;margin-right:2em">The blip document schema expresses a structured representation of the message with little presentation logic, and is mostly not web-specific. For example, most rich-text styling is represented in annotations. This representation behaves in a much more natural way when two clients concurrently edit overlapping regions of text. The document representation may not correspond to the most natural semantic interpretation, but is designed to behave most naturally under operational transformation.</p><a name="blip-elements" style="font-weight:bold"><div style="text-align:left"><span style="color:rgb(0, 0, 0);font-weight:normal"><br /></span></div></a><hr style="text-align:left;height:1px" /><table cellpadding="0" cellspacing="2" style="width:30px;height:15px;text-align:right"><tbody><tr><td style="text-align:center;width:30px;height:15px;color:rgb(255, 255, 255);background-color:rgb(153, 0, 0)"> TOC </td></tr></tbody></table><a name="rfc.section.8.4.2" style="font-weight:bold"></a><h3 style="text-align:left;font-family:helvetica, monaco, MS Sans Serif, arial, sans-serif;font-weight:bold;font-style:normal;color:rgb(51, 51, 51);background-color:transparent"><a name="TOC-8.4.2.-Elements"></a>8.4.2.  Elements</h3><p style="text-align:left;margin-left:2em;margin-right:2em">The allowed elements of a blip are:</p><blockquote><dl><dt style="text-align:left">contributor</dt><dd style="text-align:left">Each contributor element has a single required attribute 'name' with the id of a participant who has contributed to the blip content. If there are duplicates (which may occur with concurrent editing) then the first is the canonical contributor and the others should be ignored or removed. Individual contributors are responsible for adding themselves to this list. This allows for "trivial" contributors such as annotators to voluntarily omit themselves. Absolute contributor information may be recovered from the operation history if required.</dd><dt style="text-align:left">body</dt><dd style="text-align:left">The displayed content of the blip. The body element may contain text and 'line' elements. The first child of the body element must be a line element. If a document contains two body elements then the first is the canonical body and others should be ignored or removed.</dd><dt style="text-align:left">line</dt><dd><div style="text-align:left">The displayed textual content of a blip is broken up into lines. Each line is preceded with a "line" element. The line element must be an empty element, that is, having no other items between the begin element and the end element. The line element may have the following attributes:</div><blockquote><dl><dt style="text-align:left">t</dt><dd style="text-align:left">The type of the line. Allowed values are 'h1', 'h2', 'h3', 'h4', 'h5', and 'li', where h[1-5] is a heading and 'li' an item in a list.</dd><dt style="text-align:left">i</dt><dd style="text-align:left">The indentation level (0,1,2,...). This attribute is only meaningful when applied to lines of type t="li".</dd><dt style="text-align:left">a</dt><dd style="text-align:left">The alignment of the text in the line. (a, m, r, j) a = align left = centered = alighted right = justified</dd><dt style="text-align:left">d</dt><dd style="text-align:left">The display direction of the line l = left to right, r = right to left</dd><dt style="text-align:left">image</dt><dd style="text-align:left">The image element represents an attached image embedded in the blip. The image element has an 'attachment' attribute that is the id of that attachment's data document. Attachments and attachment documents are described in the Google Wave Attachments whitepaper.</dd><dt style="text-align:left">reply</dt><dd style="text-align:left">The reply element denotes the location of an inline reply thread. It has an attribute 'id' that contains the id of the thread whose location it marks. Thus an inline reply's inline location is marked with a reply element.</dd></dl></blockquote></dd></dl></blockquote><a name="blip-annotations" style="font-weight:bold"><div style="text-align:left"><span style="color:rgb(0, 0, 0);font-weight:normal"><br /></span></div></a><hr style="text-align:left;height:1px" /><table cellpadding="0" cellspacing="2" style="width:30px;height:15px;text-align:right"><tbody><tr><td style="text-align:center;width:30px;height:15px;color:rgb(255, 255, 255);background-color:rgb(153, 0, 0)"> TOC </td></tr></tbody></table><a name="rfc.section.8.4.3" style="font-weight:bold"></a><h3 style="text-align:left;font-family:helvetica, monaco, MS Sans Serif, arial, sans-serif;font-weight:bold;font-style:normal;color:rgb(51, 51, 51);background-color:transparent"><a name="TOC-8.4.3.-Annotations"></a>8.4.3.  Annotations</h3><p style="text-align:left;margin-left:2em;margin-right:2em">The following are the allowed annotations allowed in blip documents.</p><a name="blip-annotations-style" style="font-weight:bold"><div style="text-align:left"><span style="color:rgb(0, 0, 0);font-weight:normal"><br /></span></div></a><hr style="text-align:left;height:1px" /><table cellpadding="0" cellspacing="2" style="width:30px;height:15px;text-align:right"><tbody><tr><td style="text-align:center;width:30px;height:15px;color:rgb(255, 255, 255);background-color:rgb(153, 0, 0)"> TOC </td></tr></tbody></table><a name="rfc.section.8.4.3.1" style="font-weight:bold"></a><h3 style="text-align:left;font-family:helvetica, monaco, MS Sans Serif, arial, sans-serif;font-weight:bold;font-style:normal;color:rgb(51, 51, 51);background-color:transparent"><a name="TOC-8.4.3.1.-Style"></a>8.4.3.1.  Style</h3><p style="text-align:left;margin-left:2em;margin-right:2em">Style annotations control the display of the content in the blip. All style annotations have names that begin with "style/". The allowed values for the style annotations are the same as those of the CSS properties of the same name.</p><ul style="margin-left:2em;margin-right:2em"><li style="text-align:left;margin-left:3em">style/backgroundColor</li><li style="text-align:left;margin-left:3em">style/color</li><li style="text-align:left;margin-left:3em">style/fontFamily</li><li style="text-align:left;margin-left:3em">style/fontSize</li><li style="text-align:left;margin-left:3em">style/fontStyle</li><li style="text-align:left;margin-left:3em">style/fontWeight</li><li style="text-align:left;margin-left:3em">style/textDecoration</li><li style="text-align:left;margin-left:3em">style/verticalAlign</li></ul><a name="blip-annotations-user" style="font-weight:bold"><div style="text-align:left"><span style="color:rgb(0, 0, 0);font-weight:normal"><br /></span></div></a><hr style="text-align:left;height:1px" /><table cellpadding="0" cellspacing="2" style="width:30px;height:15px;text-align:right"><tbody><tr><td style="text-align:center;width:30px;height:15px;color:rgb(255, 255, 255);background-color:rgb(153, 0, 0)"> TOC </td></tr></tbody></table><a name="rfc.section.8.4.3.2" style="font-weight:bold"></a><h3 style="text-align:left;font-family:helvetica, monaco, MS Sans Serif, arial, sans-serif;font-weight:bold;font-style:normal;color:rgb(51, 51, 51);background-color:transparent"><a name="TOC-8.4.3.2.-User"></a>8.4.3.2.  User</h3><p style="text-align:left;margin-left:2em;margin-right:2em">The following annotations refer to a user id and a session id. Each client gets its session id from the server. Session ids, their assignment, and how they are transmitted to a client are out of scope for this document. It should be noted that to avoid name clashes when federating waves the session id should include the domain of the server generating them. Style annotations control the display of the content in the blip.</p><p style="text-align:left;margin-left:2em;margin-right:2em">User annotations contain information that is specific to each user session. All user annotations begin with 'user/'.</p><blockquote><dl><dt style="text-align:left">user/d/&lt;session id&gt;</dt><dd style="text-align:left">This annotation covers the entire document. The value of the annotation is a comma separated list of (userid, timestamp [,ime composition state]) The timestamp is the last time the cursor was updated. The timestamp may be used by clients to stop dislpaying the users carat after a period of inactivity.</dd><dt style="text-align:left">user/r/&lt;session id&gt;</dt><dd style="text-align:left">This annotation represents the users selection. That is, the range of text with this annotation is text that the user has selected. If the user does not have any text selected then this annotation is not present. Note that the currently implementation only supports a single selection region per user. The value of this annotation is the user id.</dd><dt style="text-align:left">user/e/&lt;session id&gt;</dt><dd style="text-align:left">This annotation represents the user's selection focus (the "blinky bit"). The first point in the range of the annotation is the cursor location for the users session. That is, the cursor is placed before the first item in the annotation range. This annotation always extends from the cursor position to the end of the document. If this annotation is missing then the cursor is placed after the last item in the document. The value of this annotation is the user id.</dd></dl></blockquote><a name="blip-annotations-link" style="font-weight:bold"><div style="text-align:left"><span style="color:rgb(0, 0, 0);font-weight:normal"><br /></span></div></a><hr style="text-align:left;height:1px" /><table cellpadding="0" cellspacing="2" style="width:30px;height:15px;text-align:right"><tbody><tr><td style="text-align:center;width:30px;height:15px;color:rgb(255, 255, 255);background-color:rgb(153, 0, 0)"> TOC </td></tr></tbody></table><a name="rfc.section.8.4.3.3" style="font-weight:bold"></a><h3 style="text-align:left;font-family:helvetica, monaco, MS Sans Serif, arial, sans-serif;font-weight:bold;font-style:normal;color:rgb(51, 51, 51);background-color:transparent"><a name="TOC-8.4.3.3.-Links"></a>8.4.3.3.  Links</h3><p style="text-align:left;margin-left:2em;margin-right:2em">Link annotations define links to other resources. All link annotations have names that begin with "link/".</p><blockquote><dl><dt style="text-align:left">link/manual</dt><dd style="text-align:left">A manually created link. A URI or IRI? is the only valid value for this annotation.</dd><dt style="text-align:left">link/auto</dt><dd style="text-align:left">A link created automatically by some linkifying process. Such annotations have a lower precedence than manual links. A URI is the only valid value for this annotation.</dd><dt style="text-align:left">link/wave</dt><dd style="text-align:left">A link to another wave. Wave ids are the only valid values for this annotation.</dd></dl></blockquote><a name="example-conversation" style="font-weight:bold"><div style="text-align:left"><span style="color:rgb(0, 0, 0);font-weight:normal"><br /></span></div></a><hr style="text-align:left;height:1px" /><table cellpadding="0" cellspacing="2" style="width:30px;height:15px;text-align:right"><tbody><tr><td style="text-align:center;width:30px;height:15px;color:rgb(255, 255, 255);background-color:rgb(153, 0, 0)"> TOC </td></tr></tbody></table><a name="rfc.section.9" style="font-weight:bold"></a><h3 style="text-align:left;font-family:helvetica, monaco, MS Sans Serif, arial, sans-serif;font-weight:bold;font-style:normal;color:rgb(51, 51, 51);background-color:transparent"><a name="TOC-9.-Example-Conversations"></a>9.  Example Conversations</h3><a name="simple-replies" style="font-weight:bold"><div style="text-align:left"><span style="color:rgb(0, 0, 0);font-weight:normal"><br /></span></div></a><hr style="text-align:left;height:1px" /><table cellpadding="0" cellspacing="2" style="width:30px;height:15px;text-align:right"><tbody><tr><td style="text-align:center;width:30px;height:15px;color:rgb(255, 255, 255);background-color:rgb(153, 0, 0)"> TOC </td></tr></tbody></table><a name="rfc.section.9.1" style="font-weight:bold"></a><h3 style="text-align:left;font-family:helvetica, monaco, MS Sans Serif, arial, sans-serif;font-weight:bold;font-style:normal;color:rgb(51, 51, 51);background-color:transparent"><a name="TOC-9.1.-Simple-Replies"></a>9.1.  Simple Replies</h3><p style="text-align:left;margin-left:2em;margin-right:2em">This is an example conversation showing how a conversation is represented by this model. This conversation consists of two blips and a conversation manifest document in one wavelet.</p><p style="text-align:left;margin-left:2em;margin-right:2em">The conversation manifest has an id of "conversation" and is:</p><div style="text-align:left;display:table;width:0px;margin-left:3em;margin-right:auto"><pre style="font-family:Courier New, Courier, monospace;font-size:small;text-align:left;padding-top:4px;padding-right:4px;padding-bottom:4px;padding-left:4px;color:rgb(0, 0, 0);background-color:rgb(204, 204, 204)">&lt;conversation&gt;
    &lt;blip id="b+a"&gt;
        &lt;thread id="r1"&gt;
            &lt;blip id="b+b"&gt;&lt;/blip&gt;
            &lt;blip id="b+c"&gt;&lt;/blip&gt;
        &lt;/thread&gt;
    &lt;/blip&gt;
&lt;/conversation&gt;
</pre></div><p style="text-align:left;margin-left:2em;margin-right:2em">There is a blip with an id of "b+a":</p><div style="text-align:left;display:table;width:0px;margin-left:3em;margin-right:auto"><pre style="font-family:Courier New, Courier, monospace;font-size:small;text-align:left;padding-top:4px;padding-right:4px;padding-bottom:4px;padding-left:4px;color:rgb(0, 0, 0);background-color:rgb(204, 204, 204)">&lt;contributor name="fred@acmewave.com"&gt;
&lt;body&gt;
    &lt;line&gt;&lt;/line&gt;There is a theory which states that if ever anybody
    &lt;line&gt;&lt;/line&gt;discovers exactly what the Universe is for and why it
    &lt;line&gt;&lt;/line&gt;is here, it will instantly disappear and be replaced by
    &lt;line&gt;&lt;/line&gt;something even more bizarre and inexplicable. There is another
    &lt;line&gt;&lt;/line&gt;theory which states that this has already happened.
&lt;/body&gt;
</pre></div><p style="text-align:left;margin-left:2em;margin-right:2em">A reply blip with an id of "b+b":</p><div style="text-align:left;display:table;width:0px;margin-left:3em;margin-right:auto"><pre style="font-family:Courier New, Courier, monospace;font-size:small;text-align:left;padding-top:4px;padding-right:4px;padding-bottom:4px;padding-left:4px;color:rgb(0, 0, 0);background-color:rgb(204, 204, 204)">&lt;contributor name="barney@acmewave.com"&gt;
&lt;body&gt;
    &lt;line&gt;&lt;/line&gt;Isn't that a quote from Douglas Adams?
&lt;/body&gt;
</pre></div><p style="text-align:left;margin-left:2em;margin-right:2em">And a reply blip with an id of "b+c":</p><div style="text-align:left;display:table;width:0px;margin-left:3em;margin-right:auto"><pre style="font-family:Courier New, Courier, monospace;font-size:small;text-align:left;padding-top:4px;padding-right:4px;padding-bottom:4px;padding-left:4px;color:rgb(0, 0, 0);background-color:rgb(204, 204, 204)">&lt;contributor name="fred@acmewave.com"&gt;
&lt;body&gt;
    &lt;line&gt;&lt;/line&gt;Yes it is.
&lt;/body&gt;
</pre></div><a name="example-inline-replies" style="font-weight:bold"><div style="text-align:left"><span style="color:rgb(0, 0, 0);font-weight:normal"><br /></span></div></a><hr style="text-align:left;height:1px" /><table cellpadding="0" cellspacing="2" style="width:30px;height:15px;text-align:right"><tbody><tr><td style="text-align:center;width:30px;height:15px;color:rgb(255, 255, 255);background-color:rgb(153, 0, 0)"> TOC </td></tr></tbody></table><a name="rfc.section.9.2" style="font-weight:bold"></a><h3 style="text-align:left;font-family:helvetica, monaco, MS Sans Serif, arial, sans-serif;font-weight:bold;font-style:normal;color:rgb(51, 51, 51);background-color:transparent"><a name="TOC-9.2.-In-line-Replies"></a>9.2.  In-line Replies</h3><p style="text-align:left;margin-left:2em;margin-right:2em">The above shows the conversation with non-inline replies. Here is the same conversation, but the replies are in-line. This conversation will display differently from the above conversation.</p><p style="text-align:left;margin-left:2em;margin-right:2em">The conversation manifest has an id of "conversation" and is:</p><div style="text-align:left;display:table;width:0px;margin-left:3em;margin-right:auto"><pre style="font-family:Courier New, Courier, monospace;font-size:small;text-align:left;padding-top:4px;padding-right:4px;padding-bottom:4px;padding-left:4px;color:rgb(0, 0, 0);background-color:rgb(204, 204, 204)">&lt;conversation&gt;
    &lt;blip id="b+a"&gt;
        &lt;thread inline="true" id="r1"&gt;
            &lt;blip id="b+b"&gt;&lt;/blip&gt;
            &lt;blip id="b+c"&gt;&lt;/blip&gt;
        &lt;/thread&gt;
    &lt;/blip&gt;
&lt;/conversation&gt;
</pre></div><p style="text-align:left;margin-left:2em;margin-right:2em">There is a blip with an id of "b+a":</p><div style="text-align:left;display:table;width:0px;margin-left:3em;margin-right:auto"><pre style="font-family:Courier New, Courier, monospace;font-size:small;text-align:left;padding-top:4px;padding-right:4px;padding-bottom:4px;padding-left:4px;color:rgb(0, 0, 0);background-color:rgb(204, 204, 204)">&lt;contributor name="fred@acmewave.com"&gt;
&lt;body&gt;
    &lt;line&gt;&lt;/line&gt;There is a theory which states that if ever anybody
    &lt;line&gt;&lt;/line&gt;discovers exactly what&lt;reply id='aF8j_s'&gt;&lt;/reply&gt; the Universe is for and why it
    &lt;line&gt;&lt;/line&gt;is here, it will instantly disappear and be replaced by
    &lt;line&gt;&lt;/line&gt;something even more bizarre and inexplicable. There is another
    &lt;line&gt;&lt;/line&gt;theory which states that this has already happened.
&lt;/body&gt;
</pre></div><p style="text-align:left;margin-left:2em;margin-right:2em">Note the addition of the reply element which anchors the in-line reply.</p><p style="text-align:left;margin-left:2em;margin-right:2em">A reply blip with an id of "b+b":</p><div style="text-align:left;display:table;width:0px;margin-left:3em;margin-right:auto"><pre style="font-family:Courier New, Courier, monospace;font-size:small;text-align:left;padding-top:4px;padding-right:4px;padding-bottom:4px;padding-left:4px;color:rgb(0, 0, 0);background-color:rgb(204, 204, 204)">&lt;contributor name="barney@acmewave.com"&gt;
&lt;body&gt;
    &lt;line&gt;&lt;/line&gt;Isn't that a quote from Douglas Adams?
&lt;/body&gt;
</pre></div><p style="text-align:left;margin-left:2em;margin-right:2em">And a reply blip with an id of "b+c":</p><div style="text-align:left;display:table;width:0px;margin-left:3em;margin-right:auto"><pre style="font-family:Courier New, Courier, monospace;font-size:small;text-align:left;padding-top:4px;padding-right:4px;padding-bottom:4px;padding-left:4px;color:rgb(0, 0, 0);background-color:rgb(204, 204, 204)">&lt;contributor name="fred@acmewave.com"&gt;
&lt;body&gt;
    &lt;line&gt;&lt;/line&gt;Yes it is.
&lt;/body&gt;
</pre></div><a name="private-inline-replies" style="font-weight:bold"><div style="text-align:left"><span style="color:rgb(0, 0, 0);font-weight:normal"><br /></span></div></a><hr style="text-align:left;height:1px" /><table cellpadding="0" cellspacing="2" style="width:30px;height:15px;text-align:right"><tbody><tr><td style="text-align:center;width:30px;height:15px;color:rgb(255, 255, 255);background-color:rgb(153, 0, 0)"> TOC </td></tr></tbody></table><a name="rfc.section.9.3" style="font-weight:bold"></a><h3 style="text-align:left;font-family:helvetica, monaco, MS Sans Serif, arial, sans-serif;font-weight:bold;font-style:normal;color:rgb(51, 51, 51);background-color:transparent"><a name="TOC-9.3.-Private-In-line-Replies"></a>9.3.  Private In-line Replies</h3><p style="text-align:left;margin-left:2em;margin-right:2em">The above shows the conversation with inline replies. Here is the same conversation, but the replies are private in-line. This conversation will display differently from the above two conversations.</p><p style="text-align:left;margin-left:2em;margin-right:2em">The conversation manifest has an id of "conversation" and is an contained in the wavelet with an id of 'wave+a'.</p><div style="text-align:left;display:table;width:0px;margin-left:3em;margin-right:auto"><pre style="font-family:Courier New, Courier, monospace;font-size:small;text-align:left;padding-top:4px;padding-right:4px;padding-bottom:4px;padding-left:4px;color:rgb(0, 0, 0);background-color:rgb(204, 204, 204)">&lt;conversation&gt;
    &lt;blip id="b+a"&gt;&lt;/blip&gt;
&lt;/conversation&gt;
</pre></div><p style="text-align:left;margin-left:2em;margin-right:2em">There is a blip with an id of "b+a":</p><div style="text-align:left;display:table;width:0px;margin-left:3em;margin-right:auto"><pre style="font-family:Courier New, Courier, monospace;font-size:small;text-align:left;padding-top:4px;padding-right:4px;padding-bottom:4px;padding-left:4px;color:rgb(0, 0, 0);background-color:rgb(204, 204, 204)">&lt;contributor name="fred@acmewave.com"&gt;
&lt;body&gt;
    &lt;line&gt;&lt;/line&gt;There is a theory which states that if ever anybody
    &lt;line&gt;&lt;/line&gt;discovers exactly what the Universe is for and why it
    &lt;line&gt;&lt;/line&gt;is here, it will instantly disappear and be replaced by
    &lt;line&gt;&lt;/line&gt;something even more bizarre and inexplicable. There is another
    &lt;line&gt;&lt;/line&gt;theory which states that this has already happened.
&lt;/body&gt;
</pre></div><p style="text-align:left;margin-left:2em;margin-right:2em">The replies are contained in another wavelet with an id of 'wave+b'.</p><p style="text-align:left;margin-left:2em;margin-right:2em">Being a wavelet it has its own conversation manifest:</p><div style="text-align:left;display:table;width:0px;margin-left:3em;margin-right:auto"><pre style="font-family:Courier New, Courier, monospace;font-size:small;text-align:left;padding-top:4px;padding-right:4px;padding-bottom:4px;padding-left:4px;color:rgb(0, 0, 0);background-color:rgb(204, 204, 204)">&lt;conversation
    sort="r"
    anchorWavelet="wave+a"
    anchorBlip="b+a"
    anchorManifestOffset="1"
    anchorVersion="12"
    anchorOffset="10"&gt;
   &lt;blip id="b+b"&gt;&lt;/blip&gt;
   &lt;blip id="b+c"&gt;&lt;/blip&gt;
&lt;/conversation&gt;
</pre></div><p style="text-align:left;margin-left:2em;margin-right:2em">The reply blips are in the 'wave+b' wavelet. There is the reply blip with an id of "b+b":</p><div style="text-align:left;display:table;width:0px;margin-left:3em;margin-right:auto"><pre style="font-family:Courier New, Courier, monospace;font-size:small;text-align:left;padding-top:4px;padding-right:4px;padding-bottom:4px;padding-left:4px;color:rgb(0, 0, 0);background-color:rgb(204, 204, 204)">&lt;contributor name="barney@acmewave.com"&gt;
&lt;body&gt;
    &lt;line&gt;&lt;/line&gt;Isn't that a quote from Douglas Adams?
&lt;/body&gt;
</pre></div><p style="text-align:left;margin-left:2em;margin-right:2em">And a reply blip with an id of "b+c":</p><div style="text-align:left;display:table;width:0px;margin-left:3em;margin-right:auto"><pre style="font-family:Courier New, Courier, monospace;font-size:small;text-align:left;padding-top:4px;padding-right:4px;padding-bottom:4px;padding-left:4px;color:rgb(0, 0, 0);background-color:rgb(204, 204, 204)">&lt;contributor name="fred@acmewave.com"&gt;
&lt;body&gt;
    &lt;line&gt;&lt;/line&gt;Yes it is.
&lt;/body&gt;
</pre></div><a name="display" style="font-weight:bold"><div style="text-align:left"><span style="color:rgb(0, 0, 0);font-weight:normal"><br /></span></div></a><hr style="text-align:left;height:1px" /><table cellpadding="0" cellspacing="2" style="width:30px;height:15px;text-align:right"><tbody><tr><td style="text-align:center;width:30px;height:15px;color:rgb(255, 255, 255);background-color:rgb(153, 0, 0)"> TOC </td></tr></tbody></table><a name="rfc.section.10" style="font-weight:bold"></a><h3 style="text-align:left;font-family:helvetica, monaco, MS Sans Serif, arial, sans-serif;font-weight:bold;font-style:normal;color:rgb(51, 51, 51);background-color:transparent"><a name="TOC-10.-Display"></a>10.  Display</h3><p style="text-align:left;margin-left:2em;margin-right:2em">The structure and relationships between wavelets, conversation manifests and blips defines a logical structure for conversations. What follows is a description of how the content and structure defined is presented in a user-interface, fully realizing that implementing wave on different clients will impose different constraints. The below isn't meant to constrain client implementations, but to give guidance on providing a consistent user experience.</p><p style="text-align:left;margin-left:2em;margin-right:2em">A conversation should be displayed as a single unit and may reference more than one wavelet. A wavelet is considered to be in a conversation view if it has a wavelet id in the "conv" namespace and the user has permission to access the wavelet. Wavelets other than the root in a conversation view should reference another via an anchorWavelet attribute.</p><p style="text-align:left;margin-left:2em;margin-right:2em">Blips are displayed in the order that they appear in the conversation manifest, going from top to bottom. Blip documents in a wavelet that are not referenced in the conversation manifest should not be displayed. Threads are indented from the content of their parent blip unless they have a property value of inline=true. The location of private replies is determined by the "anchorWavelet", "anchorManifestOffset", "anchorVersion", "anchorBlip", and "anchorOffset" properties of the conversation element. Note that the anchor position is given for version at which the private reply was created, and is recorded in the "anchorVersion" attribute. The proper display location for the private reply will depend upon keeping track of how that historical position moves as documents are mutated.</p><p style="text-align:left;margin-left:2em;margin-right:2em">The location of non-private inline replies is denoted with a reply element in the thread and should be displayed indented at that location.</p><p style="text-align:left;margin-left:2em;margin-right:2em">The display of private inline replies should include an indication that it is private, such as displaying the participants for that wavelet, along with the content of the sub-conversation.</p><a name="mechanisms" style="font-weight:bold"><div style="text-align:left"><span style="color:rgb(0, 0, 0);font-weight:normal"><br /></span></div></a><hr style="text-align:left;height:1px" /><table cellpadding="0" cellspacing="2" style="width:30px;height:15px;text-align:right"><tbody><tr><td style="text-align:center;width:30px;height:15px;color:rgb(255, 255, 255);background-color:rgb(153, 0, 0)"> TOC </td></tr></tbody></table><a name="rfc.section.11" style="font-weight:bold"></a><h3 style="text-align:left;font-family:helvetica, monaco, MS Sans Serif, arial, sans-serif;font-weight:bold;font-style:normal;color:rgb(51, 51, 51);background-color:transparent"><a name="TOC-11.-Mechanisms"></a>11.  Mechanisms</h3><p style="text-align:left;margin-left:2em;margin-right:2em">This section describes some mechanisms for changing the conversation structure. Additional mechanisms remain to be defined. In addition, the interactions of concurrent modifications have yet to be detailed.</p><a name="create-blip" style="font-weight:bold"><div style="text-align:left"><span style="color:rgb(0, 0, 0);font-weight:normal"><br /></span></div></a><hr style="text-align:left;height:1px" /><table cellpadding="0" cellspacing="2" style="width:30px;height:15px;text-align:right"><tbody><tr><td style="text-align:center;width:30px;height:15px;color:rgb(255, 255, 255);background-color:rgb(153, 0, 0)"> TOC </td></tr></tbody></table><a name="rfc.section.11.1" style="font-weight:bold"></a><h3 style="text-align:left;font-family:helvetica, monaco, MS Sans Serif, arial, sans-serif;font-weight:bold;font-style:normal;color:rgb(51, 51, 51);background-color:transparent"><a name="TOC-11.1.-Creating-a-new-blip"></a>11.1.  Creating a new blip</h3><p style="text-align:left;margin-left:2em;margin-right:2em">To add a new blip to a thread an operation is sent to insert a blip element (with a unique id) to the thread in the conversation manifest. The added blip document may or may not be empty.</p><a name="create-reply" style="font-weight:bold"><div style="text-align:left"><span style="color:rgb(0, 0, 0);font-weight:normal"><br /></span></div></a><hr style="text-align:left;height:1px" /><table cellpadding="0" cellspacing="2" style="width:30px;height:15px;text-align:right"><tbody><tr><td style="text-align:center;width:30px;height:15px;color:rgb(255, 255, 255);background-color:rgb(153, 0, 0)"><a href="http://www.corp.google.com/~jcgregorio/wave-protocol/convspec.html#toc" style="font-weight:bold;color:rgb(255, 255, 255);background-color:transparent;font-family:monaco, charcoal, geneva, MS Sans Serif, helvetica, sans-serif;font-size:x-small;text-decoration:none"> TOC </a></td></tr></tbody></table><a name="rfc.section.11.2" style="font-weight:bold"></a><h3 style="text-align:left;font-family:helvetica, monaco, MS Sans Serif, arial, sans-serif;font-weight:bold;font-style:normal;color:rgb(51, 51, 51);background-color:transparent"><a name="TOC-11.2.-Creating-a-reply-thread"></a>11.2.  Creating a reply thread</h3><p style="text-align:left;margin-left:2em;margin-right:2em">To add a new thread an operation is sent to insert a thread element (with a unique id) to the replied-to blip element in the conversation manifest. If the thread is an inline reply an anchor element must first be inserted in the replied to blip.</p><a name="delete-blip" style="font-weight:bold"><div style="text-align:left"><span style="color:rgb(0, 0, 0);font-weight:normal"><br /></span></div></a><hr style="text-align:left;height:1px" /><table cellpadding="0" cellspacing="2" style="width:30px;height:15px;text-align:right"><tbody><tr><td style="text-align:center;width:30px;height:15px;color:rgb(255, 255, 255);background-color:rgb(153, 0, 0)"> TOC </td></tr></tbody></table><a name="rfc.section.11.3" style="font-weight:bold"></a><h3 style="text-align:left;font-family:helvetica, monaco, MS Sans Serif, arial, sans-serif;font-weight:bold;font-style:normal;color:rgb(51, 51, 51);background-color:transparent"><a name="TOC-11.3.-Deleting-a-blip"></a>11.3.  Deleting a blip</h3><p style="text-align:left;margin-left:2em;margin-right:2em">Deleting a blip involves deleting the blip, any inline replies to the blip, and (optionally) any non-inline replies to the blip. This mechanism deletes only inline replies.</p><p style="text-align:left;margin-left:2em;margin-right:2em">A blip is deleted by sending mutations that:</p><ul style="margin-left:2em;margin-right:2em"><li style="margin-left:3em"><div style="text-align:left">Delete all subordinate inline threads by:</div><ul style="margin-left:2em;margin-right:2em"><li style="text-align:left;margin-left:3em">Deleting all blips in the thread</li><li style="text-align:left;margin-left:3em">Removing the thread element from the conversation manifest</li></ul></li><li style="text-align:left;margin-left:3em">Transform the blip's document to an empty document</li><li style="text-align:left;margin-left:3em">Set the "deleted" attribute value to 'true' on the blip's conversation manifest element if the blip has non-inline replies, else deletes the element entirely.</li></ul><p style="text-align:left;margin-left:2em;margin-right:2em">After a blip is deleted, non-inline replies to that blip are still nested within their parent in the conversation manifest. They may be rendered as children of a deleted blip. Future restructure operations may allow the children to be re-parented. If a deleted blip has no remaining replies then the blip entry should be deleted from the conversation manifest document. If the deleted blip was the last in a thread then the thread entry should be removed from the manifest document.</p><p style="text-align:left;margin-left:2em;margin-right:2em">Edits that occur concurrently with a blip deletion are nullified in transform. Concurrently created replies to a deleted blip are deleted if the blip has no replies, but survive if the blip element remains (with "deleted" set to "true").</p><a name="rfc.references1" style="font-weight:bold"><div style="text-align:left"><span style="color:rgb(0, 0, 0);font-weight:normal"><br /></span></div></a><hr style="text-align:left;height:1px" /><table cellpadding="0" cellspacing="2" style="width:30px;height:15px;text-align:right"><tbody><tr><td style="text-align:center;width:30px;height:15px;color:rgb(255, 255, 255);background-color:rgb(153, 0, 0)"> TOC </td></tr></tbody></table><h3 style="text-align:left;font-family:helvetica, monaco, MS Sans Serif, arial, sans-serif;font-weight:bold;font-style:normal;color:rgb(51, 51, 51);background-color:transparent"><a name="TOC-12.-References"></a>12. References</h3><table border="0" style="text-align:left" width="99%"><tbody><tr><td style="font-size:x-small" valign="top"><a name="TERMS" style="font-weight:bold">[TERMS]</a></td><td style="font-size:x-small"><a href="mailto:sob@harvard.edu" style="font-weight:bold;color:rgb(153, 0, 0);background-color:transparent">Bradner, S.</a>, “<a href="http://tools.ietf.org/html/rfc2119" rel="nofollow" style="font-weight:bold;color:rgb(153, 0, 0);background-color:transparent">Key words for use in RFCs to Indicate Requirement Levels</a>,” BCP 14, RFC 2119, March 1997 (<a href="ftp://ftp.isi.edu/in-notes/rfc2119.txt" style="font-weight:bold;color:rgb(153, 0, 0);background-color:transparent">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html" rel="nofollow" style="font-weight:bold;color:rgb(153, 0, 0);background-color:transparent">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml" rel="nofollow" style="font-weight:bold;color:rgb(153, 0, 0);background-color:transparent">XML</a>).</td></tr></tbody></table><a name="rfc.authors" style="font-weight:bold"><div style="text-align:left"><span style="color:rgb(0, 0, 0);font-weight:normal"><br /></span></div></a><hr style="text-align:left;height:1px" /><table cellpadding="0" cellspacing="2" style="width:30px;height:15px;text-align:right"><tbody><tr><td style="text-align:center;width:30px;height:15px;color:rgb(255, 255, 255);background-color:rgb(153, 0, 0)"> TOC </td></tr></tbody></table><h3 style="text-align:left;font-family:helvetica, monaco, MS Sans Serif, arial, sans-serif;font-weight:bold;font-style:normal;color:rgb(51, 51, 51);background-color:transparent"><a name="TOC-Authors-Addresses"></a>Authors' Addresses</h3><table border="0" cellpadding="0" cellspacing="0" style="text-align:left" width="99%"><tbody><tr><td style="font-size:x-small"> </td><td style="font-size:x-small">Alex North</td></tr><tr><td style="font-size:x-small"> </td><td style="font-size:x-small">Google, Inc.</td></tr><tr><td style="font-weight:bold;font-size:x-small;margin-left:4em;text-align:right">Email: </td><td style="font-size:x-small"><a href="mailto:anorth@google.com" style="font-weight:bold;color:rgb(153, 0, 0);background-color:transparent">anorth@google.com</a></td></tr><tr cellpadding="3"><td> </td><td> </td></tr><tr><td style="font-size:x-small"> </td><td style="font-size:x-small">Joe Gregorio</td></tr><tr><td style="font-size:x-small"> </td><td style="font-size:x-small">Google, Inc.</td></tr><tr><td style="font-weight:bold;font-size:x-small;margin-left:4em;text-align:right">Email: </td><td style="font-size:x-small"><a href="mailto:jcgregorio@google.com" style="font-weight:bold;color:rgb(153, 0, 0);background-color:transparent">jcgregorio@google.com</a></td></tr></tbody></table></div></span></i></div></span></div>
</span></div></td></tr></tbody></table>
</div> 
</div> 
<div id="sites-canvas-bottom-panel">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-subpages"> </div>
</div>
</div> 
</td> 
</tr>
</table> 
</div> 
</div> 
<div id="sites-chrome-footer-wrapper">
<div id="sites-chrome-footer-wrapper-inside">
<div id="sites-chrome-footer">
<div xmlns="http://www.w3.org/1999/xhtml" class="sites-subfooter">
<p>
            
                 
                <a class="sites-system-link" href="https://www.google.com/a/UniversalLogin?md=waveprotocol.org&amp;continue=http%3A%2F%2Fsites.google.com%2Fa%2Fwaveprotocol.org%2Fwave-protocol%2Fdraft-protocol-specs%2Fwave-conversation-model&amp;service=jotspot">Sign in</a>
              
             
            <a class="sites-system-link" href="javascript:void(window.open('http://www.google.com/sites/help/intl/en/terms_apps.html'))">Terms</a>
             
            <a class="sites-system-link" href="/system/app/pages/reportAbuse?src=/draft-protocol-specs/wave-conversation-model" target="_blank">Report Abuse</a>
            
                 
                <a class="sites-system-link" href="javascript:;" onclick="window.open(webspace.printUrl)">Print page</a>
              
            
             | 
            <b class="powered-by">Powered by <a class="sites-system-link" href="http://sites.google.com">Google Sites</a></b>
</p>
</div>
</div>
</div>
</div>
</div> 
</div> 
</div> 

<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('sjl');
  </script>

<script xmlns="http://www.w3.org/1999/xhtml" src="http://www.gstatic.com/sites/p/b46d27/system/js/jot_min_view__en.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('jl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
          var searchBox = new gsites.Searchbox('sites-searchbox-search-button');
          searchBox.initListeners();
          searchBox.setScopesMenu(webspace.page.isSiteRtlLocale);
        </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("2bd", "Navigation", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_2bd');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
  setTimeout(function() {
    var fingerprint = gsites.date.TimeZone.getFingerprint([1109635200000,1128902400000,1130657000000,1143333000000,1143806400000,1145000000000,1146380000000,1152489600000,1159800000000,1159500000000,1162095000000,1162075000000,1162105500000]);
    gsites.Xhr.send('http://www.waveprotocol.org/_/tz', null, null, 'GET', null, null, { afjstz: fingerprint });
  }, 500);
</script>
<script xmlns="http://www.w3.org/1999/xhtml">
                    window.onload = function() {                    
                      var loadTimer = window.jstiming.load;
                      loadTimer.tick("ol");
                      loadTimer["name"] = "load," + webspace.page.type;
                      window.jstiming.report(loadTimer);
                    }
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
        JOT_insertAnalyticsCode(false);
      </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
  //<![CDATA[
    // Fires delayed events.
    (function() {
      JOT_fullyLoaded = true;
      var delayedEvents = JOT_delayedEvents;
      for (var x = 0; x < delayedEvents.length; x++) {
        var event = delayedEvents[x];
        JOT_postEvent(event.eventName, event.eventSrc, event.payload);
      }
      JOT_delayedEvents = null;
      JOT_postEvent('pageLoaded');
    })();

    // Decorate any fastUI buttons on the page with a class of 'goog-button'.
    if (webspace.user.hasWriteAccess) {
      JOT_decorateButtons();
    }
 //]]>
</script>
<div id="server-timer-div" style="display:none"> </div>
<script>
          window.jstiming.load.tick('render');
        </script>
</body>
</html>
